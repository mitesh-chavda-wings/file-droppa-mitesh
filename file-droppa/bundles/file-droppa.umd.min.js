!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common"],t):"object"==typeof exports?exports["file-droppa.umd.min"]=t(require("@angular/core"),require("@angular/common")):e["file-droppa.umd.min"]=t(e["@angular/core"],e["@angular/common"])}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=11)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var i=n(0),o=(n.n(i),n(10));n.d(t,"a",function(){return l});var r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},l=function(){function e(){this.filesUpdated=new i.EventEmitter(!0),this.startAutoUploading=null,this.beforeAddFile=null,this.WSfiles=new WeakSet,this._iFiles=[]}return Object.defineProperty(e.prototype,"files",{get:function(){return this.iFiles.reduce(function(e,t){return e.push(t.File),e},[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iFiles",{get:function(){return this._iFiles},set:function(e){this._iFiles=e},enumerable:!0,configurable:!0}),e.prototype.addFiles=function(e){var t=this;e=e.filter(function(e){if(!t.WSfiles.has(e))return"function"==typeof t.beforeAddFile&&t.beforeAddFile(e)?(t.WSfiles.add(e),!0):"function"!=typeof t.beforeAddFile}).map(function(e){var n=new o.a(e);return t.startAutoUploading&&t.startAutoUploading(n),n}),this.iFiles=this.iFiles.concat(e),this.filesUpdated.emit(!0)},e.prototype.removeFiles=function(e){this.WSfiles.delete(e.File),this.iFiles=this.iFiles.filter(function(t){return t.id!==e.id}),this.filesUpdated.emit(!0)},e.prototype.clearStore=function(){var e=this;this.iFiles.forEach(function(t){e.WSfiles.delete(t.File)}),this.iFiles=[],this.filesUpdated.emit(!0)},e}();l=r([n.i(i.Injectable)()],l)},function(e,t,n){"use strict";var i=n(0);n.n(i);n.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(){this.ext="",this.previewSrc="",this.fileName="",this.previewHeight=75,this.removeFile=new i.EventEmitter(!0)}return e.prototype.ngAfterContentInit=function(){this.file&&this.getFileType()},e.prototype.removeFileListener=function(e){e.preventDefault(),this.removeFile&&this.removeFile.emit(!0)},e.prototype.getFileType=function(){var e,t=this,n=/^image\//;if(!n.test(this.file.type)){var i=this.file.name.split(".").pop();return this.fileName=this.file.name,void(this.ext=i.length>3?"file":"."+i)}e=new FileReader,e.addEventListener("load",function(){var n=new Image,i=e.result;n.onload=function(){var e=n.height/n.width,o=e*t.previewHeight;t.previewSrc=i,t.previewHeight=o<t.previewHeight?t.previewHeight:o},n.src=i},!1),this.file&&e.readAsDataURL(this.file)},e}();o([n.i(i.Input)(),r("design:type",Object)],l.prototype,"file",void 0),o([n.i(i.Input)(),r("design:type",Object)],l.prototype,"index",void 0),o([n.i(i.Input)(),r("design:type",Object)],l.prototype,"percentage",void 0),o([n.i(i.Input)(),r("design:type",Object)],l.prototype,"loadingSuccessful",void 0),o([n.i(i.Input)(),r("design:type",Object)],l.prototype,"responseMessage",void 0),o([n.i(i.Output)(),r("design:type",Object)],l.prototype,"removeFile",void 0),l=o([n.i(i.Component)({selector:"fileItem",styles:['\n        .file-container {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            width: 75px;\n            margin: 20px 10px 0 0;\n            transition: opacity 0.5s, margin 0.5s linear;\n            flex-direction: column;\n            position:relative;\n        }\n\n        .file-container.uploaded {\n            opacity: 0;\n            margin: 0;\n            height: 0;\n            overflow: hidden;\n        }\n\n        .flex-block {\n            width: 90%;\n            text-align: center;\n            font-size: 0.8em;\n            margin: 2px 0;\n        }\n\n        .file-remove {\n            cursor: pointer;\n            position: absolute;\n            left: 87%;\n            top: 8px;\n        }\n        .file-upload-error {\n            position: absolute;\n            top: 8px;\n            left:-8px;\n        }\n        .file-name {\n            text-overflow: ellipsis;\n            overflow: hidden;\n        }\n\n        .file-preview {\n            background: #ccc;\n            border-radius: 2px;\n            width: inherit;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            background-size: cover;\n            color: #fff;\n        }\n\n         .file-preview-ext {\n            text-transform: uppercase;\n        }\n\n        .file-progress {\n            width: 80%;\n            display: block;\n        }\n\n\n        button {\n            margin: 0;\n        }\n\nspan {\n    position:relative;\n    z-index:1;\n    overflow:hidden;\n    list-style:none;\n    padding:0;\n    margin:0 0 0.25em;\n}\n\nspan a:link {\n    display:block;\n    border:0;\n    padding-left:28px;\n    color:#c55500;\n}\n\nspan a:hover,\nspan a:focus {\n    color:#730800;\n    background:transparent;\n}\n\nspan:before,\nspan:after,\nspan a:before,\nspan a:after {\n    content:"";\n    position:absolute;\n    top:50%;\n    left:0;\n}\n\nspan a:before,\nspan a:after {\n    margin:-8px 0 0;\n    background:#c55500;\n}\n\nspan a:hover:before,\nspan a:focus:before {\n    background:#730800;\n}\n\n\n.remove a:before {\n    width:16px;\n    height:16px;\n    /* css3 */\n    -webkit-border-radius:16px;\n    -moz-border-radius:16px;\n    border-radius:16px;\n}\n\n.remove a:after {\n    left:3px;\n    width:10px;\n    height:2px;\n    margin-top:-1px;\n    background:#fff;\n}\n.warning:before {\n    content:"!";\n    z-index:2;\n    left:8px;\n    margin-top:-8px;\n    font-size:14px;\n    font-weight:bold;\n    color:#000;\n}\n\n.warning:after {\n    z-index:1;\n    border-width:0 11px 18px;\n    border-style:solid;\n    border-color:#F8D201 transparent;\n    margin-top:-10px;\n    background:transparent;\n}\n\n.file-upload-error .tooltiptext {\n    visibility: hidden;\n    white-space:nowrap;\n    background-color: black;\n    color: #fff;\n    text-align: center;\n    padding: 5px;\n    border-radius: 6px;\n\n    /* Position the tooltip text - see examples below! */\n    position: absolute;\n    z-index: 1;\n}\n\n.file-upload-error:hover .tooltiptext {\n    visibility: visible;\n}\n\n    '],template:'\n        <div *ngIf="file" class="file-container">\n            <div class="flex-block file-preview" [ngStyle]="{\'background-image\': \'url(\' + previewSrc + \')\', \'height\': previewHeight + \'px\'}">\n                <div *ngIf="ext" class="flex-block file-preview-ext ">{{ext}}</div>\n                <div *ngIf="!previewSrc" class="flex-block file-name">{{fileName}}</div>\n                <progress [value]="percentage" max="100" class="file-progress"></progress>\n            </div>\n            <div class="file-remove">\n                <span class="remove"><a href="#" (click)="removeFileListener($event)"></a></span>\n            </div>\n            <div *ngIf="!loadingSuccessful" class="file-upload-error">\n                <span class="warning"></span>\n                <span *ngIf="responseMessage" class="tooltiptext">{{responseMessage}}</span>\n            </div>\n            <div class="flex-block">{{file.size | getSize }}</div>\n        </div>\n    '})],l)},function(e,t,n){"use strict";var i=n(0),o=(n.n(i),n(8)),r=n(1);n.d(t,"a",function(){return a});var l=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t,n){this.filesStore=e,this.el=t,this.fileParser=n,this.hiddenFileInput=null,this.promise=null,this.createHiddenInput()}return Object.defineProperty(e.prototype,"multiple",{set:function(e){e?this.hiddenFileInput.setAttribute("multiple","multiple"):this.hiddenFileInput.removeAttribute("multiple")},enumerable:!0,configurable:!0}),e.prototype.onClick=function(e){this.hiddenFileInput&&this.hiddenFileInput.click()},e.prototype.drop=function(e){var t=this;e.preventDefault(),e.dataTransfer&&e.dataTransfer.files.length&&(this.promise=this.fileParser.processInputFromDrop(e).then(function(e){t.updateFilesStore(e.slice())}),this.updateStyles())},e.prototype.dragenter=function(e){e.preventDefault()},e.prototype.dragover=function(e){e.preventDefault(),this.updateStyles(!0)},e.prototype.dragleave=function(e){e.preventDefault(),this.updateStyles()},e.prototype.OnDestroy=function(){this.hiddenFileInput&&document.body.removeChild(this.hiddenFileInput),this.hiddenFileInput=null},e.prototype.updateStyles=function(e){void 0===e&&(e=!1)},e.prototype.updateFilesStore=function(e){this.filesStore.addFiles(e)},e.prototype.createHiddenInput=function(){var e=this;this.hiddenFileInput&&document.body.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",this.hiddenFileInput.className="_hiddenInputClassName",document.body.appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",function(t){for(var n=[],i=0,o=t.target.files.length;i<o;i++)n.push(t.target.files[i]);e.hiddenFileInput.value="",e.updateFilesStore(n)})},e}();l([n.i(i.Input)(),s("design:type",Boolean),s("design:paramtypes",[Boolean])],a.prototype,"multiple",null),a=l([n.i(i.Component)({selector:"fileDropZone, [fileDropZone]",providers:[o.a],styles:["\n        .file_dropZone_internal {\n            border: 3px dashed #DDD;\n            border-radius:10px;\n            padding:10px;\n            width:400px;\n            height:200px;\n            color:#CCC;\n            text-align:center;\n            display:table-cell;\n            vertical-align:middle;\n            cursor:pointer;\n        }\n    "],template:"\n        <ng-content></ng-content>\n    ",host:{"(drop)":"drop($event)","(dragenter)":"dragenter($event)","(dragover)":"dragover($event)","(dragleave)":"dragleave($event)","(click)":"onClick($event)"},encapsulation:i.ViewEncapsulation.None}),s("design:paramtypes",[r.a,i.ElementRef,o.a])],a)},function(e,t,n){"use strict";var i=n(0),o=(n.n(i),n(1)),r=n(9);n.d(t,"a",function(){return a});var l=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){var n=this;this.filesStore=e,this.fileUploadService=t,this.showFilesList=!0,this.autoUpload=!1,this.beforeRequest=null,this.beforeFileUpload=null,this.beforeAddFile=null,this.dropZoneTemplate='\n      <div class="file_dropZone_internal">\n          Drop Files Here\n      </div>\n    ',this.filesUpdated=new i.EventEmitter(!0),this.fileUploaded=new i.EventEmitter(!0),this.uploadButtonTemplate='\n      <div class="file-droppa-btn orange">\n        <span>Upload All Files</span>\n       </div>\n    ',this.removeButtonTemplate='\n      <div class="file-droppa-btn red">\n        <span>Remove All Files</span>\n       </div>\n    ',this.multiple=!0,e.filesUpdated.subscribe(function(){n.filesUpdated.emit(e.files)}),t.fileUploadedEvent.subscribe(function(e){var t=e[0],i=e[1],o=e[2];t?n.filesStore.removeFiles(o):(o.loadingSuccessful=!1,o.responseText=!1),n.fileUploaded.emit([t,i,o.file])}),e.startAutoUploading=this.startAutoUploading.bind(this)}return Object.defineProperty(e.prototype,"url",{set:function(e){this.fileUploadService.url=e},enumerable:!0,configurable:!0}),e.prototype.startAutoUploading=function(e){this.autoUpload&&this.fileUploadService.uploadFile(e)},e.prototype.ngOnInit=function(){this.filesStore.beforeAddFile="function"==typeof this.beforeAddFile?this.beforeAddFile:function(e){return!0},this.fileUploadService.beforeRequest=this.beforeRequest,this.fileUploadService.beforeFileUpload="function"==typeof this.beforeFileUpload?this.beforeFileUpload:function(e){return!0}},e.prototype.removeAllFiles=function(){this.filesStore.clearStore()},e.prototype.uploadAllFiles=function(){this.fileUploadService.uploadFiles(this.filesStore.iFiles)},e}();l([n.i(i.Input)(),s("design:type",Boolean)],a.prototype,"showFilesList",void 0),l([n.i(i.Input)(),s("design:type",Boolean)],a.prototype,"autoUpload",void 0),l([n.i(i.Input)(),s("design:type",Function)],a.prototype,"beforeRequest",void 0),l([n.i(i.Input)(),s("design:type",String),s("design:paramtypes",[String])],a.prototype,"url",null),l([n.i(i.Input)(),s("design:type",Function)],a.prototype,"beforeFileUpload",void 0),l([n.i(i.Input)(),s("design:type",Function)],a.prototype,"beforeAddFile",void 0),l([n.i(i.Input)(),s("design:type",String)],a.prototype,"dropZoneTemplate",void 0),l([n.i(i.Output)(),s("design:type",Object)],a.prototype,"filesUpdated",void 0),l([n.i(i.Output)(),s("design:type",Object)],a.prototype,"fileUploaded",void 0),l([n.i(i.Input)(),s("design:type",String)],a.prototype,"uploadButtonTemplate",void 0),l([n.i(i.Input)(),s("design:type",String)],a.prototype,"removeButtonTemplate",void 0),l([n.i(i.Input)(),s("design:type",Boolean)],a.prototype,"multiple",void 0),a=l([n.i(i.Component)({selector:"fileDroppa",providers:[o.a,r.a],encapsulation:i.ViewEncapsulation.None,styles:["\n        .file-droppa-container {\n            width: 400px;\n        }\n        .file-droppa-btns {\n         display: flex;\n          align-items: center;\n          justify-content: center;\n\n        }\n        .file-droppa-btn {\n              margin: 15px;\n              padding: 0;\n\n              overflow: hidden;\n\n              border-width: 0;\n              outline: none;\n              border-radius: 2px;\n              box-shadow: 0 1px 4px rgba(0, 0, 0, .6);\n\n              background-color: #2ecc71;\n              color: #ecf0f1;\n\n              transition: background-color .3s;\n              width: 140px;\n              text-align: center;\n              font-size: 12px;\n\n        }\n\n        .file-droppa-btn:hover{\n          background-color: #27ae60;\n        }\n\n        .file-droppa-btn span {\n          display: block;\n          padding: 12px 24px;\n        }\n\n        .file-droppa-btn.orange {\n          background-color: #e67e22;\n        }\n\n        .file-droppa-btn.orange:hover {\n          background-color: #d35400;\n        }\n\n        .file-droppa-btn.red {\n          background-color: #e74c3c;\n        }\n\n        .file-droppa-btn.red:hover{\n          background-color: #c0392b;\n        }\n        "],template:'\n        <div class="file-droppa-container">\n            <fileDropZone [multiple]="multiple">\n                <div [innerHTML]="dropZoneTemplate"></div>\n            </fileDropZone>\n            <br/>\n            <ng-content></ng-content>\n            <fileList *ngIf="showFilesList"></fileList>\n            <div class="file-droppa-btns" *ngIf="filesStore.iFiles.length">\n              <div #uploadButtonArea (click)="uploadAllFiles($event)">\n                <ng-content select="[upload-button]"></ng-content>\n              </div>\n              <div *ngIf="uploadButtonArea.children.length === 0" (click)="uploadAllFiles($event)"\n                   [innerHTML]="uploadButtonTemplate"></div>\n              <div #removeButtonArea (click)="removeAllFiles($event)">\n                <ng-content select="[remove-button]"></ng-content>\n              </div>\n              <div *ngIf="removeButtonArea.children.length === 0" (click)="removeAllFiles($event)"\n                   [innerHTML]="removeButtonTemplate"></div>\n            </div>\n        </div>\n    '}),s("design:paramtypes",[o.a,r.a])],a)},function(e,t,n){"use strict";var i=n(0),o=(n.n(i),n(1));n.d(t,"a",function(){return s});var r=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.filesStore=e}return e.prototype.removeFile=function(e){this.filesStore.removeFiles(e)},e}();s=r([n.i(i.Component)({selector:"fileList, [fileList]",styles:["\n        .file-list {\n            width: 430px;\n            margin-bottom: 5px;\n            display: flex;\n            flex-flow: wrap;\n            justify-content: flex-start;\n         }\n    "],template:'\n        <div class="file-list">\n            <fileItem *ngFor="let file of filesStore.iFiles"\n                [file]="file.File"\n                [percentage]="file.percentage"\n                [loadingSuccessful]="file.loadingSuccessful"\n                [responseMessage]="file.responseMessage"\n                (removeFile)="removeFile(file)">\n            </fileItem>\n        </div>\n    '}),l("design:paramtypes",[o.a])],s)},function(e,t,n){"use strict";var i=n(0);n.n(i);n.d(t,"a",function(){return r});var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},r=function(){function e(){}return e.prototype.transform=function(e){var t=e||0,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(1e3));return 0===t?"0 Byte":(t/Math.pow(1e3,i)).toPrecision(3)+" "+n[i]},e}();r=o([n.i(i.Pipe)({name:"getSize"})],r)},function(e,n){e.exports=t},function(e,t,n){"use strict";var i=n(0);n.n(i);n.d(t,"a",function(){return r});var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},r=function(){function e(){}return e.prototype.processFilesFromInput=function(e){var t=this,n=Object.keys(e).reduce(function(n,i){var o,r=e[i];if(null!=r.webkitGetAsEntry&&(o=r.webkitGetAsEntry()))o.isFile?n.push(Promise.resolve(r.getAsFile())):o.isDirectory&&n.push(t.processDirectory(o));else if(null!=r.getAsFile)null!=r.kind&&"file"!==r.kind||n.push(Promise.resolve(r.getAsFile()));else if(r.isFile){var l=new Promise(function(e,t){r.file(e,t)});n.push(l)}else r.isDirectory&&n.push(t.processDirectory(r));return n},[]);return Promise.all(n).then(this.flattenArrayOfFiles)},e.prototype.processDirectory=function(e){var t=this,n=e.createReader(),i=[],o=function(){return new Promise(function(e,r){n.readEntries(function(n){var r=[];if(n.length)for(var l=0;l<n.length;l++)r.push(t.processFilesFromInput({0:n[l]}));else e(null);i.push(o()),Promise.all(r).then(t.flattenArrayOfFiles).then(e)},function(e){r("Error while reading folder")})})};return i.push(o()),Promise.all(i).then(this.flattenArrayOfFiles)},e.prototype.processInputFromDrop=function(e){var t=e.dataTransfer.items;if(t&&t.length&&null!=t[0].webkitGetAsEntry)return Promise.resolve(this.processFilesFromInput(t));if(t&&t.length&&!t[0].webkitGetAsEntry)return Promise.resolve(t);if(e.dataTransfer.files){for(var n=[],i=0,o=e.dataTransfer.files.length;i<o;i++)n.push(e.dataTransfer.files[i]);return Promise.resolve(n)}},e.prototype.flattenArrayOfFiles=function(e){return Promise.resolve(e.reduce(function(e,t){if(t)return e.concat(t)},[]))},e}();r=o([n.i(i.Injectable)()],r)},function(e,t,n){"use strict";var i=n(0);n.n(i);n.d(t,"a",function(){return r});var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},r=function(){function e(){this.zone=new i.NgZone({enableLongStackTrace:!1}),this.url=null,this.beforeRequest=null,this.beforeFileUpload=null,this.fileUploadedEvent=new i.EventEmitter(!0)}return e.prototype.uploadFiles=function(e){var t=this;return Promise.all(e.reduce(function(e,n){return e.push(t.uploadFile(n)),e},[]))},e.prototype.uploadFile=function(e){var t=this;if(!this.url)throw"url to upload needs to be provided";if(e.loading)throw"Already under loading";var n=this,i=new FormData,o=new XMLHttpRequest;o.upload.onprogress=function(n){var i=100*n.loaded/n.total|0;t.zone.run(function(){e.percentage=i})};var r=new Promise(function(t,i){o.onload=o.onerror=function(o){var r=this;n.zone.run(function(){200==r.status?(e.loading=!1,e.loadingSuccessful=!0,t(!0)):(e.loading=!1,e.loadingSuccessful=!1,i(!1))})}}).then(function(n){t.fileUploadedEvent.emit([n,o.response,e])},function(n){t.fileUploadedEvent.emit([n,o.response,e])});return e.loading=!0,o.open("POST",this.url,!0),"function"==typeof this.beforeRequest&&this.beforeRequest(o),i.append(""+e.File.name,e.File),"function"==typeof this.beforeFileUpload?Promise.resolve(this.beforeFileUpload(i)).then(function(t){t&&o.send(t),t||console.warn("beforeFileUpload didn't return formData for "+e.File.name+" and upload was aborted")}):o.send(i),r},e}();r=o([n.i(i.Injectable)()],r)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.loading=!1,this.percentage=0,this.removing=!1,this.responseMessage="Error happened during upload",this.id=Math.random().toString(36).substr(2),this.loadingSuccessful=!0,this.uploader=null,this.File=e}return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=(n.n(i),n(0)),r=(n.n(o),n(4)),l=n(2),s=n(3),a=n(5),p=n(6);n.d(t,"FileDroppa",function(){return d});var f=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(r<3?o(l):r>3?o(t,n,l):o(t,n))||l);return r>3&&l&&Object.defineProperty(t,n,l),l},d=function(){function e(){}return e}();d=f([n.i(o.NgModule)({imports:[i.CommonModule],declarations:[p.a,r.a,l.a,s.a,a.a],exports:[r.a,l.a,s.a,a.a]})],d)}])});