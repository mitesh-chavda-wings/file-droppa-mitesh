{"version":3,"sources":["../../lib/Directives/FileDropZone.ts"],"names":[],"mappings":"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","file":"FileDropZone.js","sourceRoot":"","sourcesContent":["import {Component, ElementRef, Input, EventEmitter, Output, ViewEncapsulation} from '@angular/core';\nimport {FileParser} from \"../Services/FileParser.service\";\nimport {FilesStore} from \"../Services/FileStore.service\";\n\n\nexport class FileDropZone {\n    private hiddenFileInput = null;\n    public promise = null;\n\n    constructor(private filesStore: FilesStore, private el:ElementRef, private fileParser:FileParser) {\n        this.createHiddenInput();\n    }\n\n    \n    set multiple(value: boolean) {\n      const attributeName = 'multiple';\n      if (value) {\n        this.hiddenFileInput.setAttribute(attributeName, attributeName);\n      } else {\n        this.hiddenFileInput.removeAttribute(attributeName)\n      }\n    }\n\n    /*\n     * Host Event Listeners\n     * */\n\n    onClick(e) {\n        this.hiddenFileInput && this.hiddenFileInput.click();\n    }\n\n    drop(e) {\n        e.preventDefault();\n        if (!e.dataTransfer || !e.dataTransfer.files.length) {\n            return;\n        }\n        this.promise = this.fileParser.processInputFromDrop(e)\n            .then((files)=> {\n                this.updateFilesStore([...files]);\n            });\n        this.updateStyles();\n    }\n\n    dragenter(e) {\n        e.preventDefault()\n    }\n\n    dragover(e) {\n        e.preventDefault();\n        this.updateStyles(true);\n    }\n\n    dragleave(e) {\n        e.preventDefault();\n        this.updateStyles();\n    }\n\n    /*\n     * Public methods\n     * */\n\n    OnDestroy() {\n        this.hiddenFileInput && document.body.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n    }\n\n    updateStyles(dragOver:boolean = false) {\n        //this.el.nativeElement.classList[(dragOver) ? 'add' : 'remove'](this._overCls);\n    }\n\n    updateFilesStore(files:Array<File>):void {\n        this.filesStore.addFiles(files);\n    }\n\n    createHiddenInput() {\n        this.hiddenFileInput && document.body.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = document.createElement(\"input\");\n        this.hiddenFileInput.setAttribute(\"type\", \"file\");\n        this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n        this.hiddenFileInput.style.visibility = \"hidden\";\n        this.hiddenFileInput.style.position = \"absolute\";\n        this.hiddenFileInput.style.top = \"0\";\n        this.hiddenFileInput.style.left = \"0\";\n        this.hiddenFileInput.style.height = \"0\";\n        this.hiddenFileInput.style.width = \"0\";\n        this.hiddenFileInput.className = \"_hiddenInputClassName\";\n        document.body.appendChild(this.hiddenFileInput);\n        this.hiddenFileInput.addEventListener(\"change\", (e)=> {\n            let files = [];\n            for(let i = 0, l = e.target.files.length;i<l;i++){\n                files.push(e.target.files[i]);\n            }\n            this.hiddenFileInput.value = \"\";\n            this.updateFilesStore(files);\n        });\n    }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'fileDropZone, [fileDropZone]',\n    providers: [FileParser],\n    styles: [`\n        .file_dropZone_internal {\n            border: 3px dashed #DDD;\n            border-radius:10px;\n            padding:10px;\n            width:400px;\n            height:200px;\n            color:#CCC;\n            text-align:center;\n            display:table-cell;\n            vertical-align:middle;\n            cursor:pointer;\n        }\n    `],\n    template: `\n        <ng-content></ng-content>\n    `,\n    host: {\n        '(drop)': 'drop($event)',\n        '(dragenter)': 'dragenter($event)',\n        '(dragover)': 'dragover($event)',\n        '(dragleave)': 'dragleave($event)',\n        '(click)': 'onClick($event)'\n    },\n    encapsulation: ViewEncapsulation.None\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: FilesStore, },\n{type: ElementRef, },\n{type: FileParser, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'multiple': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}